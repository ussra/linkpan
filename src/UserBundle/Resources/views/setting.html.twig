{% extends "UserBundle::userbase.html.twig" %}

{% block Title %}
    {{'Settings'|trans}}
{% endblock %}


{% block pageContent %}
    <div style="margin-top:50px">
        <div class="x_panel">
            <div class="x_title">
                <h2><i class="fa fa-bars"></i>{{'Settings'|trans}}</h2>

                <div class="clearfix"></div>
            </div>
            <div class="x_content">

                <div class="col-lg-3 col-md-3 col-sm-4 col-xs-12">
                    <!-- required for floating -->
                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs tabs-left">
                        <li class="active"><a href="#contact" data-toggle="tab" title="Contact Informations">{{'Settings_Contac_tInformations'|trans}}</a>
                        </li>
                        </li>
                        <li><a href="#company" data-toggle="tab" title="Company's Informations">{{'Settings_Company_Informations'|trans}}</a>
                        <li><a href="#uppass" data-toggle="tab" title="Change Password" id="account">{{'Account'|trans}}</a>
                        </li>
                        <li>
                            <a href="#qtsecurity" data-toggle="tab" title="Security Question">
                                {{'Settings_Change_security_Question'|trans}}
                            </a>
                        </li>
                        <li><a href="#billing" data-toggle="tab" title="Billing & Payments">{{'Settings_Billing_Payements'|trans}}</a>
                        </li>
                        <li><a href="#link" data-toggle="tab" title="Links">{{'Settings_Links'|trans}}</a> </li>
                        <li><a href="#unblock" data-toggle="tab" title="Links">{{'Settings_Unblock_List'|trans}}</a> </li>
                        <li><a href="#add" data-toggle="tab" title="Invite friends">{{'Settings_Invite_friends'|trans}}</a> </li>
                    </ul>
                </div>

                <div class="col-xs-9">
                    <!-- Tab panes -->
                    <div class="tab-content">
                        <!-- Contact -->
                        <div class="tab-pane active" id="contact">
                            <form id="contactForm" data-parsley-validate class="form-horizontal form-label-left" method="post" enctype="multipart/form-data" action="{{ path('contact') }}">

                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" >{{'Settings_First_name'|trans}}
                                    </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" id="firstname" name="firstname" value="{{ user.firstname }}" class="form-control col-md-7 col-xs-12" required>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12"  >{{'Settings_Last_name'|trans}}
                                    </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" id="lastname" name="lastname" value="{{ user.lastname }}" class="form-control col-md-7 col-xs-12" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" >Email
                                    </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="email" id="email" name="email" value="{{ user.email }}"class="form-control col-md-7 col-xs-12" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" >{{'Adress'|trans}}
                                    </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" id="email" name="adress" value="{{ user.adress }}"class="form-control col-md-7 col-xs-12" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" >{{'Settings_Alternative'|trans}} Email
                                    </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="email" id="alteremail" name="alteremail" value="{{ user.alternativeEmail }}" class="form-control col-md-7 col-xs-12">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" >{{'FAX'|trans}}
                                    </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="tel" id="fax" value="{{ user.fax }}" name="fax"  class="form-control col-md-7 col-xs-12">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" >{{'Tel'|trans}}
                                    </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="tel" id="tel" value="{{ user.tel }}" name="tel" class="form-control col-md-7 col-xs-12">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputFile" class="control-label col-md-3 col-sm-3 col-xs-12">{{'Groups_Image'|trans}}</label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input  type="file" class="form-control-file" name="image" id="exampleInputFile" aria-describedby="fileHelp">
                                    </div>
                                </div>
                                <div class="form-group" style="float: right">
                                    <div class="">
                                        <button id="send" type="submit" class="btn btn-success">{{'Confirm'|trans}}</button>
                                    </div>
                                </div>
                            </form>
                        
                                <div style="border-bottom:1px solid #e0e0e0;margin:10px 0 10px 0">
                                </div>
                                <div class="form-group">
                                    <label style="color:#cb2431;font-size:20px;">{{'Settings_deleacc'|trans}}</label> <br>
                                    <label>{{'Settings_deleacc_txt'|trans}}</label> <br>
                                    <button style="display:none" type="button"  id="clickdeletacc2" onclick="$('#deleacc').modal('show');">
                                        {{'Settings_deleacc'|trans}}
                                    </button>
                                    <button type="button" class="btn btn-danger btn-md method"  onclick="clickdeletacc()">
                                        {{'Settings_deleacc'|trans}}
                                    </button>
                                    <script>
                                       
                                    </script>
                                </div>
                        </div>
                        <!-- Company Informations -->
                        <div class="tab-pane" id="company">
                            <form  data-parsley-validate class="form-horizontal form-label-left" id="companyinfo"  method="post" enctype="multipart/form-data" action="{{ path('company') }}">
                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12">{{'Name'|trans}}
                                    </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" id="name" required="required" class="form-control col-md-7 col-xs-12" name="name" value="{{ user.companyName }}">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputFile" class="control-label col-md-3 col-sm-3 col-xs-12">
                                        {{'Logo'|trans}}
                                    </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input  type="file" class="form-control-file" id="uploadimage" name="uploadimage" aria-describedby="fileHelp" accept="image/*">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputFile" class="control-label col-md-3 col-sm-3 col-xs-12">{{'Settings_Year_Established'|trans}}</label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="number" id="year" required="required" class="form-control col-md-7 col-xs-12" min="1900" name="year"  value="{{ user.yearEstablished }}" >
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputFile" class="control-label col-md-3 col-sm-3 col-xs-12">{{'Settings_Official_Website'|trans}}</label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" id="website" required="required" class="form-control col-md-7 col-xs-12" name="website" value="{{ user.website }}"  >
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputFile" class="control-label col-md-3 col-sm-3 col-xs-12">{{'Settings_Business_Type'|trans}}</label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" id="bustype" required="required" class="form-control col-md-7 col-xs-12" name="business" value="{{ user.businessType }}" >
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputFile" class="control-label col-md-3 col-sm-3 col-xs-12">{{'Settings_Total_umber_employees'|trans}}</label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="number" id="numberemp" required="required" class="form-control col-md-7 col-xs-12" min="1" name="number" value="{{ user.numberEmp }}" >
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputFile" class="control-label col-md-3 col-sm-3 col-xs-12">{{'Settings_Registred_Adress'|trans}}</label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" id="regadress" required="required" class="form-control col-md-7 col-xs-12" name="regadress" value="{{ user.regAdress }}" >
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputFile" class="control-label col-md-3 col-sm-3 col-xs-12">{{'Settings_Operational_Adress'|trans}}</label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" id="opadress" required="required" class="form-control col-md-7 col-xs-12" name="optadress" value="{{ user.optAdress }}" >
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="exampleInputFile" class="control-label col-md-3 col-sm-3 col-xs-12">{{'About_Us'|trans}}</label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <textarea class="form-control col-md-7 col-xs-12" rows="5" id="aboutus" maxlength="30" name="aboutus" >{{ user.aboutUs }} </textarea>
                                    </div>
                                </div>
                                <div class="form-group" style="float: right">
                                    <div class="">
                                        <button  type="submit" class="btn btn-success" >{{'Groups_Save'|trans}}</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <!-- Update password -->
                        <div class="tab-pane" id="uppass">
                            <form id="uppassform" data-parsley-validate class="form-horizontal form-label-left" style="margin-top: 15%" method="post" action="{{ path('updatepassword') }}">
                                <div style="margin-top: 5%">
                                    <div class="form-group">
                                        <label class="control-label col-md-3 col-sm-3 col-xs-12" >{{'Settings_Old_Password'|trans}}
                                        </label>
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                            <input type="password" id="oldpass" name="oldpass" class="form-control col-md-7 col-xs-12" required>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-3 col-sm-3 col-xs-12" >{{'Settings_New_Password'|trans}}
                                        </label>
                                        <div class="col-md-6 col-sm-6 col-xs-12">
                                            <input type="password" id="newpass" name="newpass" class="form-control col-md-7 col-xs-12" required>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group" style="float: right">
                                    <div class="">
                                        <button  type="submit" class="btn btn-danger">{{'Settings_Change'|trans}}</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <!-- Security Question -->
                        <div class="tab-pane" id="qtsecurity">
                            {% if user.secuityQuestion == '' %}
                                <small>{{'Settings_You_have_no_set'|trans}}</small>
                                {% else %}
                                    <small>{{'Settings_Your_security'|trans}}: <strong>{{ user.secuityQuestion }}</strong></small>
                            {% endif %}
                            <form id="SQ_form" data-parsley-validate class="form-horizontal form-label-left" style="margin-top: 15%" method="post" action="{{ path('securityquestion') }}">
                                <div class="form-group" style="margin-top: 8%">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">{{'Settings_Security_Question'|trans}}
                                    </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <select id="securityQuestion" name="securityQuestion" class="form-control col-md-7 col-xs-12" required>
                                            <option value="">{{'Settings_Choose'|trans}}...</option>
                                            <option value="What was your childhood nickname?">{{'Settings_q1'|trans}}</option>
                                            <option value="What is the name of your favorite childhood friend?">{{'Settings_q2'|trans}}</option>
                                            <option value="In what city or town did your mother and father meet?">{{'Settings_q3'|trans}}</option>
                                            <option value="What is the middle name of your oldest child?">{{'Settings_q4'|trans}}</option>
                                            <option value="What is your favorite team?">{{'Settings_q5'|trans}}</option>
                                            <option value="What is your favorite movie?">{{'Settings_q6'|trans}}</option>
                                            <option value="What was your favorite sport in high school?">{{'Settings_q7'|trans}}</option>
                                            <option value="What was your favorite food as a child?">{{'Settings_q8'|trans}}</option>
                                        </select>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="control-label col-md-3 col-sm-3 col-xs-12" >{{'Settings_Response'|trans}}
                                    </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input type="text" id="response" name="response" class="form-control col-md-7 col-xs-12" required>
                                    </div>
                                </div>

                                <div class="form-group" style="float: right">
                                    <div class="">
                                        <button type="submit" class="btn btn-success" id="qsconfirm" onclick="security()">{{'Confirm'|trans}}</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <!-- Billing & payment -->
                        <div class="tab-pane" id="billing">
                            <div style="margin-top: 10%">
                                <div style="float: right">
                                    <button type="button" class="btn btn-primary btn-md method" id="addmethod" onclick="$('#methodModal').modal('show');">
                                        {{'Settings_Add_Method'|trans}}
                                    </button>
                                </div>
                                {% set billing = app.session.get('billing')  %}
                                {% if billing is null or billing is not defined or billing is empty  %}
                                    <h2 id="billingtitle">{{'Settings_Add_NOYou_billing'|trans}}</h2>
                                    <div style="display: none" id="billingtable">
                                        <h2 id="billingtitle">{{'Settings_Add_NOYou_billing'|trans}}</h2>
                                    </div>

                                    {% else %}
                                        <table class="table table-striped" style="margin-top: 8%" id="billinglist">
                                            <thead>
                                            <tr>
                                                <th>{{'Settings_Card_with'|trans}}</th>
                                                <th></th>
                                                <th></th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                                {% for value in billing %}
                                                    <tr id="value{{ value.id }}">
                                                        <th scope="row">{{ value.number }}</th>
                                                        <td>{{ value.brand }}</td>
                                                        <td>
                                                            <a onclick="removeCard({{ value.id }})">
                                                                <button type="button" class="btn btn-danger btn-xs removecard" > <i class="fa fa-minus" title="remove cart"></i> </button>
                                                            </a>
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                {% endif %}
                            </div>
                        </div>
                        <!-- Links -->
                        <div class="tab-pane" id="link" >
                            <div class="row">
                                <label for="exampleInputFile" style="font-size:15px">{{'Settings_Connect_to'|trans}}</label>
                            </div>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <form method="post" action="{{ path('links') }}">
                                    <div class="input-group">
                                    <span class="input-group-btn">
                                        <a href="#" class="btn btn-primary onl_btn-facebook" style="background:#3b5998;border:none;width:60px;" data-toggle="tooltip" data-placement="top" title="Facebook" >
                                            <i style="" class="fa fa-facebook fa-lg"></i>
                                        </a>
                                    </span>
                                        {% if user.facebook == '' %}{% set fb = '..' %}{% else %}{% set fb = user.facebook %}{% endif %}
                                        <input type="text" name="facebook" class="form-control" placeholder="/{{ fb }}" id="fb">
                                    </div>

                                    <div class="input-group">
                                    <span class="input-group-btn">
                                        <a href="#" class="btn btn btn-primary onl_btn-twitter" style="background:#1da1f2;border:none;width:60px;" data-toggle="tooltip" data-placement="top" title="Twitter" >
                                            <i class="fa fa-twitter fa-lg"></i>
                                        </a>
                                    </span>
                                        {% if user.twitter == '' %}{% set tw = '..' %}{% else %}{% set tw = user.twitter %}{% endif %}
                                        <input type="text" name="twitter" class="form-control" placeholder="/{{ tw }}" id="twitter">

                                    </div>
                                    <div class="input-group">
                                    <span class="input-group-btn">
                                        <a href="#" class="btn btn-primary onl_btn-linkedin" style="background:#007b5;border:none;width:60px;" data-toggle="tooltip" data-placement="top" title="LinkedIn">
                                            <i class="fa fa-linkedin fa-lg"></i>
                                        </a>
                                    </span>
                                        {% if user.linkedin == '' %}{% set linkedin = '..' %}{% else %}{% set linkedin = user.linkedin %}{% endif %}
                                        <input type="text" name="linkedin" class="form-control" placeholder="/{{ linkedin }}" id="linkedin">
                                    </div>
                                    <input type="submit" class="btn btn-primary savelink" style="float:right" value="{{'Confirm'|trans}}">
                                </form>

                            </div>
                        </div>
                        <!-- block list -->
                        <div class="tab-pane" id="unblock" >
                            {% set blockList = app.session.get('block_list') %}
                            {% if blockList is null %}
                                <h4>{{'Empty_list'|trans}}</h4>
                                {% else %}
                                    <table class="table table-striped" style="margin-top: 8%" >
                                        <thead>
                                            <tr>
                                                <th></th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        {% for value in blockList %}
                                            <tr id="value">
                                                <th scope="row">{{ value.block_first_name }} {{ value.block_last_name }}</th>
                                                <td>
                                                    <a onclick="unblock({{ value.block_id }})" >
                                                        <button type="button" class="btn btn-danger btn-xs unblock" > <i class="fa fa-unlock" title="unblock"></i> </button>
                                                    </a>
                                                </td>
                                            </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                            {% endif %}
                        </div>
                        <!-- Invite friends -->
                        <div class="tab-pane" id="add" >
                            <!--**************************************************-->
                            <div class="col-md-6">
                                <div class="box box-widget" style="height: auto;">
                                    <div class="box-header with-border">
                                        <div class="panel-body">
                                            <form method="post" style="max-width: 412px;">
                                                <div class="form-group">
                                                    <h2 style="line-height: 32px; font-weight: 400;">{{'Settings_See_who'|trans}}</h2>
                                                    <p>{{'Settings_fastest_way'|trans}}</p>
                                                    <input type="email" id="inviteemail" name="inviteemail" class="form-control">
                                                </div>
                                                <div class="form-atfooter" style="border:none;">
                                                    <a><input type="button" class="btn btn-primary" id="send" value="{{'Continue'|trans}}" onclick="invite()"></a>&nbsp; <span id="notice"></span>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--**************************************************-->
                            <!--**************************************************-->
                            <div class="col-md-2">
                                <div class="col-md-2">
                                    <ul class="mt1" style="list-style: none; margin: 2px 0; margin-left: -21px;">
                                        <li>
                                            <a href="#" style="text-decoration: none;">
                                                <img src={{ asset('Userscripts/img/settings/gmail.png') }} width="40px" height="30px" style="margin:10px;">
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#" style="text-decoration: none;">
                                                <img src={{ asset('Userscripts/img/settings/outlook.png') }} width="40px" height="35px" style="margin:10px;">
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#" style="text-decoration: none;">
                                                <img src={{ asset('Userscripts/img/settings/yahoo.png') }}  width="40px" height="25px" style="margin:10px;">
                                            </a>
                                        </li>
                                        <li>
                                            <a href="#" style="text-decoration: none;" data-toggle="modal" data-target="#myModal">
                                                <img src={{ asset('Userscripts/img/settings/mail.png') }}  width="40px" height="35px" style="margin:10px;">
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <!--Add Billing modal -->
    <div id="methodModal" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">{{'Settings_Add_Billing'|trans}}</h4>
                </div>
                <div class="modal-body">
                    <div class="panel panel-default credit-card-box">
                        <div class="panel-heading display-table" >
                            <div class="row display-tr" >
                                <h3 class="panel-title display-td">{{'Settings_Payment_Details'|trans}}</h3>
                                <div class="display-td" >
                                    <img class="img-responsive pull-right" src="http://i76.imgup.net/accepted_c22e0.png">
                                </div>
                            </div>
                        </div>
                        <div class="panel-body">
                            <form action="/charge" method="post" id="payment-form">
                                <div class="form-row">
                                    <label for="card-element">
                                        {{'Settings_Credit_debit_card'|trans}}
                                    </label>
                                    <div id="card-element">
                                        <!-- A Stripe Element will be inserted here. -->
                                    </div>

                                    <!-- Used to display form errors. -->
                                    <div id="card-errors" role="alert"></div>
                                </div>

                                <button class="btn btn-success" style="margin-top:10px;float:right ">{{'Settings_close'|trans}}</button>
                            </form>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">{{'close'|trans}}</button>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!--end -->
    <!-- Invite friends password -->
    <div id="inviteModal" class="modal fade" role="dialog">
        <div class="modal-dialog modal-sm">

            <!-- Modal content-->
            <div class="modal-content ">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">{{'Settings_Set_password'|trans}}</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <input type="password" class="form-control " id="invitepassword" placeholder="{{'Password'|trans}}">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" onclick="sendInvit()" class="btn btn-info" data-dismiss="modal" id="inviteConfirm"{{'Confirm'|trans}}></button>
                </div>
            </div>

        </div>
    </div>
    <!-- dele acc -->
    <div id="deleacc" class="modal fade" role="dialog">
        <div class="modal-dialog modal-sm">

            <!-- Modal content-->
            <div class="modal-content ">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">{{'Password'|trans}}</h4>
                </div>
                <form action="{{ path('delete_account') }}" method="post">
                    <div class="modal-body">
                        <div class="form-group">
                            <input type="password" class="form-control " id="password" placeholder="{{'Password'|trans}}" name="password" required>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-info" >{{'Confirm'|trans}}</button>
                    </div>
                </form>
            </div>

        </div>
    </div>
    <!-- End acc -->
{% endblock pageContent %}

{% block scripts %}
    <!-- Save data -->
    <script src="https://js.stripe.com/v3/"></script>
    <script>
        // delet acc confirmation:
         function clickdeletacc(){
            swal({
            title: "Are you sure?",
            text: "Are you sure that you want to delete your account?",
            icon: "warning",
            buttons: ["NO", "YES !"],
            dangerMode: true,
            })
            .then(willDelete => {
                if (willDelete) {
                    document.getElementById("clickdeletacc2").click();
                }
            });
        } //end delet acc confirmation
        // Create a Stripe client.
        var stripe = Stripe('pk_test_W7BV1CRR2gqWVgH7S2X0JEn8');

        // Create an instance of Elements.
        var elements = stripe.elements();

        // Custom styling can be passed to options when creating an Element.
        // (Note that this demo uses a wider set of styles than the guide below.)
        var style = {
            base: {
                color: '#32325d',
                lineHeight: '18px',
                fontFamily: '"Helvetica Neue", Helvetica, sans-serif',
                fontSmoothing: 'antialiased',
                fontSize: '16px',
                '::placeholder': {
                    color: '#aab7c4'
                }
            },
            invalid: {
                color: '#fa755a',
                iconColor: '#fa755a'
            }
        };

        // Create an instance of the card Element.
        var card = elements.create('card', {style: style});

        // Add an instance of the card Element into the `card-element` <div>.
        card.mount('#card-element');

        // Handle real-time validation errors from the card Element.
        card.addEventListener('change', function(event) {
            var displayError = document.getElementById('card-errors');
            if (event.error) {
                displayError.textContent = event.error.message;
            } else {
                displayError.textContent = '';
            }
        });

        // Handle form submission.
        var form = document.getElementById('payment-form');
        form.addEventListener('submit', function(event) {
            event.preventDefault();

            stripe.createToken(card).then(function(result) {
                if (result.error) {
                    // Inform the user if there was an error.
                    var errorElement = document.getElementById('card-errors');
                    errorElement.textContent = result.error.message;
                } else {
                    // Send the token to your server.
                    //stripeTokenHandler(result.token);
                    alert('Please , wait a moment to verify your card informations')
                    $.ajax({
                        url: '{{ (path('billing')) }}',
                        type: 'POST',
                        dataType: 'json',
                        data:
                            {
                                'token': result.token
                            },
                        async: true,
                        success: function (data)
                        {
                            if(data == 'ERR')
                                alert('Sorry we cannot insert this card , please retry again')
                            else
                            {
                                if(data == 'exist')
                                    alert('This card already exist !')
                                else
                                    window.location.href = data
                            }
                        }
                    });
                }
            });
        });
    </script>

    <!-- Remove card -->
    <script>
        function removeCard(CardId)
        {
            //$('#value'.concat(CardId)).remove()
            var r = confirm("Are you sure you want to cancel this card ?");
            if (r == true)
            {
                $('.removecard').prop('disabled',true)
                $.ajax({
                    url: '{{ (path('remove_card')) }}',
                    type: 'POST',
                    dataType: 'json',
                    data:
                        {
                            'billingid':CardId
                        },
                    async: true,
                    success: function (data)
                    {
                        if(data =='ERR')
                        {
                            alert('Sorry , we cannot remove this card , please retry again')
                            $('.removecard').prop('disabled',false)
                        }
                        else
                        {
                            alert('Card deleted')
                            window.location.href = data
                        }
                    }
                });
            }
        }
    </script>

    <!-- unblock -->
    <script>
        function unblock(block)
        {

            $.ajax({
                url: '{{ (path('unblock')) }}',
                type: 'POST',
                dataType: 'json',
                data:
                    {
                       'block_item':block
                    },
                async: true,
                success: function (data)
                {
                    window.location.href = data
                }
            });
        }
    </script>

    <!-- invite -->
    <script>
        function invite()
        {
            if($('#inviteemail').val() == '')
                alert('please set your email !')
            else
                $('#inviteModal').modal('show')
        }

        function sendInvit()
        {
            if($('#invitepassword').val() == '')
                alert('please set your email s password')
            else
            {
               // send mails
               //
                alert('we will invite your contacts to join linkpan , Thanks !')
                $('#invitepassword').val('')
                $('#inviteemail').val('')
                $('#inviteModal').modal('hide');
            }
        }
    </script>
{% endblock %}



{% block privacy  %}
{% endblock %}